{% extends 'base.html' %}
{% block title %}Annuler ou reprogrammer{% endblock %}
{% block content %}
<h2>Annuler ou reprogrammer votre rendez‑vous</h2>
<p><strong>Date :</strong> {{ booking.slot.start.strftime('%d/%m/%Y') }}<br>
   <strong>Heure :</strong> {{ booking.slot.start.strftime('%H:%M') }} – {{ booking.slot.end.strftime('%H:%M') }}<br>
   <strong>Agence :</strong> {{ booking.slot.agency.name }} – {{ booking.slot.agency.city }}</p>

{% if booking.status == 'cancelled' %}
  <div class="alert alert-warning">Ce rendez‑vous a déjà été annulé.</div>
  <p><a href="{{ url_for('index') }}" class="btn btn-primary">Retour à l’accueil</a></p>
{% else %}
  <p>Que souhaitez‑vous faire ?</p>
  <form method="post">
    <input type="hidden" name="booking_id" value="{{ booking.id }}">
    <button type="submit" name="action" value="cancel" class="btn btn-danger">Annuler le rendez‑vous</button>
    <button type="submit" name="action" value="reschedule" class="btn btn-warning">Reprogrammer</button>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Retour</a>
  </form>
{% endif %}
{% endblock %}